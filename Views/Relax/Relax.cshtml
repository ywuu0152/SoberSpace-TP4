
@{
    ViewBag.Title = "Relax";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<body background="~/IMG/Relax/pexels-s-migaj-747964.jpg" style="background-size: cover; background-attachment: fixed ">*@

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link href="https://fonts.googleapis.com/css?family=Bitter:400,700&display=swap&subset=latin-ext"
          rel="stylesheet" />
    <link rel="stylesheet"
          href="https://meyerweb.com/eric/tools/css/reset/reset.css" />
    <link href="~/Content/css/Relax.css" rel="stylesheet" />
    @*<link href="~/Content/css/Header.css" rel="stylesheet" />*@

    <style>
        .body, html {
            overflow-x: hidden;
        }
    </style>
</head>
<body background="~/IMG/Relax/pexels-s-migaj-747964.jpg" style="background-size: cover; background-attachment: fixed ">


    @*======= Header Section =======*@
    @*<div style="text-align:center;">
            <img class="img-fluid" src="~/IMG/Relax/Relax.jpg" style="margin-right: 7px;  ">

        </div>*@




    <!-- ======= Hero Section ======= -->
    <!--<section id="hero" class="d-flex flex-column justify-content-center align-items-center" style="margin-top:0px">
        <div class="content">
            <div class="left-col">
                <h1 style="color:black;">
                    RELAX! <br /><br />
                    ENJOY THE MUSIC! <br /><br />
                    LISTEN TO THE PODCAST!
                </h1>
            </div>
            <div class="right-col">
                <p>Click here to listen</p>

                <img src="~/IMG/Relax/icons8-play-button-circled-50.png" id="icon">
            </div>

        </div>

        <audio id="mySong">


                <source src="~/mp3/bensound-relaxing.mp3" type="audio/mp3" />



        </audio>

        <script>

            var mySong = document.getElemntById("mySong");
            var icon = document.getElementById("icon");

            icon.onclick = function(){

                if (mySong.paused) {
                    mySong.play();
                    icon.src = "~/IMG/Relax/icons8-pause-button-50.png";

                } else {
                    mySong.pause();
                    icon.src = "~/IMG/Relax/icons8-play-button-circled-50.png";


                }
            }
        </script>




    </section>-->
    <!-- End of Hero -->
    <!-- End of Header -->

    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <h2 class="text-center" style="font-size: 32px;"><strong>Listen To Music!! Relax Yourself!!</strong></h2>

    <section style="margin-top: -140px;">

        <div class="c-containter">
            <div class="music-container">
                <section class="album-cover">

                    <button class="arrow left" id="prev">
                        <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/arrow_left.svg" alt="Next Music">
                    </button>
                    <img src="http://res.cloudinary.com/dkzj4hdmd/image/upload/v1536400483/cover_yz2mak.jpg" class="cover" alt="From One To Nine by Marcel Pequel">

                    <button class="arrow right" id="next">
                        <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/arrow_right.svg" alt="Next Music">
                    </button>
                </section>
                <section class="music-player">
                    <h1 class="music-player__title"></h1>
                    <h2 class="music-player__author"></h2>
                    <div class="music-time">
                        <p class="music-time__current"></p>
                        <p class="music-time__last"></p>
                    </div>
                    <div class="music-bar" id="progress">
                        <div id="length"></div>
                    </div>
                    <div class="music-order">
                        <div class="music-order__loop is-loop" id="loop">
                            <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/loop.svg" alt="Loop music">
                        </div>
                        <div class="music-order__shuffle" id="shuffle">
                            <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/shuffle.svg" alt="Shuffle music">
                        </div>
                    </div>
                    <div class="music-control">
                        <div class="music-control__backward" id="backward">
                            <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/backward.svg" alt="Backward">
                        </div>
                        <div class="music-control__play" id="play">
                            <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/play.svg" alt="Play" class="play">
                        </div>
                        <div class="music-control__forward" id="forward">
                            <img src="https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/forward.svg" alt="Forward">
                        </div>
                    </div>
                </section>
            </div>
            <p></p>
            @*<p class="disclaimer">Music by Marcel Pequel and audio from <a href="http://freemusicarchive.org/music/Marcel_Pequel/From_One_To_Nine/" target="_blank" rel="noopener">Free Music Archive</a>. Design idea from <a href="https://dribbble.com/shots/2315906-Music-player-PSD-freebie-dailyui-Day-009" target="_blank" rel="noopener">Dima Blover</a></p>*@
        </div>

        <!-- Videos Section -->
        @*<div class="section-title">
                <h2 style="font-weight:bold; text-align : center;">Here few relavent podcast which you can listen too!</h2>
            </div>*@
    </section>

    <div class="intro" style="margin-top: -140px;">
        <h2 class="text-center" style="font-size: 32px; color:aliceblue"><strong>These are few relevant podcasts that can help you relax </strong></h2>
    </div>

    <section class="clean-block about-us" style="margin-top: 50px;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-sm-12 col-md-6 col-lg-4" style="border-style: none;">
                    <div class="card clean-card text-center">
                        <iframe allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/p3JLaF_4Tz8" style="height: 350px;"></iframe>


                        <div class="card-body info">
                            <h4 class="card-title">Addiction and Treatment</h4>

                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-md-6 col-lg-4" style="border-style: none;">
                    <div class="card clean-card text-center">
                        <iframe allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/5qap5aO4i9A" style="height: 350px;"></iframe>
                        <div class="card-body info">
                            <h4 class="card-title">Relax Music from LOFI hiphop</h4>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-md-6 col-lg-4" style="border-style: none;">
                    <div class="card clean-card text-center">
                        <iframe allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/-82_C-aNWF8" style="height: 350px;"></iframe>
                        <div class="card-body info">
                            <h4 class="card-title">About the Anxiety and finding the root</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- End of Videos Section -->


    <script>
        (function IIFE() {
            const list = [
                {
                    id: 1,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_01_-_One.mp3",
                    author: "Marcel Pequel",
                    title: "One",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 2,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_02_-_Two.mp3",
                    author: "Marcel Pequel",
                    title: "Two",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 3,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_03_-_Three.mp3",
                    author: "Marcel Pequel",
                    title: "Three",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 4,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_04_-_Four.mp3",
                    author: "Marcel Pequel",
                    title: "Four",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 5,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_05_-_Five.mp3",
                    author: "Marcel Pequel",
                    title: "Five",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 6,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_06_-_Six.mp3",
                    author: "Marcel Pequel",
                    title: "Six",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 7,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_07_-_Seven.mp3",
                    author: "Marcel Pequel",
                    title: "Seven",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 8,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_08_-_Eight.mp3",
                    author: "Marcel Pequel",
                    title: "Eight",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                },
                {
                    id: 9,
                    url:
                        "http://cdn.atrera.com/audio/Marcel_Pequel_-_09_-_Nine.mp3",
                    author: "Marcel Pequel",
                    title: "Nine",
                    cover:
                        "http://cdn.atrera.com/images/cover_yz2mak.jpg"
                }
            ];

            let currentId = 0;
            let isPlaying = false;
            let isLoop = true;
            let isShuffle = false;
            let currentAudio = "music1";
            let timer = null;
            let loopOne = false;

            const currentTimeIndicator = document.querySelector(".music-time__current");
            const leftTimeIndicator = document.querySelector(".music-time__last");
            const progressBar = document.getElementById("length");
            const playBtn = document.querySelector(".play");
            const cover = document.querySelector(".cover");
            const title = document.querySelector(".music-player__title");
            const author = document.querySelector(".music-player__author");

            const loopBtn = document.getElementById("loop");
            const shuffleBtn = document.getElementById("shuffle");
            const forwardBtn = document.getElementById("forward");
            const backwardBtn = document.getElementById("backward");
            const prevBtn = document.getElementById("prev");
            const nextBtn = document.getElementById("next");
            const progressDiv = document.getElementById("progress");

            function play(e) {
                if (!isPlaying) {
                    // console.log('play');
                    e.target.src =
                        "https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/pause.svg";
                    e.target.alt = "Pause";
                    isPlaying = true;
                    document.getElementById(currentAudio).play();
                    showTime();
                } else {
                    // console.log('pause');
                    e.target.src =
                        "https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/play.svg";
                    e.target.alt = "Play";
                    document.getElementById(currentAudio).pause();
                    isPlaying = false;
                    clearInterval(timer);
                }
            }

            function changeBar() {
                const audio = document.getElementById(currentAudio);
                const percentage = (audio.currentTime / audio.duration).toFixed(3);
                progressBar.style.transition = "";
                // console.log(audio.currentTime);

                //set current time
                const minute = Math.floor(audio.currentTime / 60);
                const second = Math.floor(audio.currentTime % 60);
                const leftTime = audio.duration - audio.currentTime;
                currentTimeIndicator.innerHTML =
                    ("0" + minute).substr(-2) + ":" + ("0" + second).substr(-2);

                //set left time
                const leftMinute = Math.floor(leftTime / 60);
                const leftSecond = Math.floor(leftTime % 60);

                leftTimeIndicator.innerHTML =
                    ("0" + leftMinute).substr(-2) + ":" + ("0" + leftSecond).substr(-2);

                //set time bar
                progressBar.style.width = percentage * 100 + "%";
            }

            function showTime() {
                timer = setInterval(() => changeBar(), 500);
            }

            function nextMusic(mode) {
                playBtn.src =
                    "https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/play.svg";
                playBtn.alt = "Play";
                document.getElementById(currentAudio).pause();
                isPlaying = false;
                clearInterval(timer);

                if (mode === "next") {
                    currentId = currentId + 1 > list.length - 1 ? 0 : currentId + 1;
                    init();
                } else {
                    currentId = currentId - 1 < 0 ? list.length - 1 : currentId - 1;
                    init();
                }
            }

            function shuffle(e) {
                isShuffle = !isShuffle;
                if (isShuffle) {
                    e.target.parentNode.classList.add("is-loop");
                } else {
                    e.target.parentNode.classList.remove("is-loop");
                }
            }

            function backward() {
                const audio = document.getElementById(currentAudio);
                audio.currentTime -= 5;
                if (!isPlaying) {
                    changeBar();
                }
            }

            function forward() {
                const audio = document.getElementById(currentAudio);
                audio.currentTime += 5;
                if (!isPlaying) {
                    changeBar();
                }
            }

            function stopMusic() {
                playBtn.src =
                    "https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/play.svg";
                playBtn.alt = "Play";
                isPlaying = false;
            }

            function goToNextMusic() {
                let newId = currentId;
                while (isShuffle && !loopOne && newId === currentId) {
                    newId = Math.floor(Math.random() * Math.floor(list.length - 1));
                }

                if (!isShuffle && !loopOne) {
                    currentId = currentId + 1 > list.length - 1 ? 0 : currentId + 1;
                }
                if (!isShuffle && loopOne) {
                    currentId = currentId;
                }

                if (isShuffle) {
                    currentId = newId;
                }
                init();
                document.getElementById(currentAudio).play();
            }

            function loop(e) {
                const audio = document.getElementById(currentAudio);

                if (!isLoop && !loopOne) {
                    isLoop = true;
                    loopOne = false;
                    // console.log('is loop');
                    e.target.parentNode.classList.add("is-loop");
                    e.target.src =
                        "https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/loop.svg";
                    audio.loop = false;
                    audio.onended = e => goToNextMusic();
                    console.log(isLoop, loopOne);
                } else if (isLoop && !loopOne) {
                    // console.log('is loop one');
                    isLoop = true;
                    loopOne = true;
                    e.target.parentNode.classList.add("is-loop");
                    e.target.src =
                        "https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/loopone.svg";
                    audio.loop = true;
                    audio.onended = e => goToNextMusic();
                    console.log(isLoop, loopOne);
                } else {
                    // console.log('not loop');
                    isLoop = false;
                    loopOne = false;
                    e.target.parentNode.classList.remove("is-loop");
                    e.target.src =
                        "https://snowleo208.github.io/100-Days-of-Code/7.%20Music%20Player/img/loop.svg";
                    audio.loop = false;
                    audio.onended = e => stopMusic();
                    console.log(isLoop, loopOne);
                }
            }

            function progress(e) {
                const audio = document.getElementById(currentAudio);
                //get current position and minus progress bar's x position to get current position in progress bar
                const pos =
                    (e.pageX - progressDiv.getClientRects()[0].x) /
                    progressDiv.getClientRects()[0].width;
                audio.currentTime = pos * audio.duration;
                changeBar();
            }

            function init() {
                //reset music duration and setup audio
                const audio =
                    document.getElementById(currentAudio) === null
                        ? new Audio()
                        : document.getElementById(currentAudio);
                audio.src = list[currentId].url;
                audio.id = currentAudio;
                document.getElementById(currentAudio) === null
                    ? document.body.appendChild(audio)
                    : "";

                progressBar.style.transition = "none";
                progressBar.style.width = "0%";
                document.getElementById(currentAudio).currentTime = 0;

                title.innerHTML = list[currentId].title;
                author.innerHTML = list[currentId].author;
                cover.src = list[currentId].cover;

                //set current time
                audio.addEventListener("loadedmetadata", function () {
                    const leftMinute = Math.floor(audio.duration / 60);
                    const leftSecond = Math.floor(audio.duration % 60);
                    currentTimeIndicator.innerHTML = "00:00";
                    leftTimeIndicator.innerHTML =
                        ("0" + leftMinute).substr(-2) + ":" + ("0" + leftSecond).substr(-2);
                    progressBar.style.transition = "";
                });

                //set loop
                document.getElementById(currentAudio).onended = e => goToNextMusic(e);
            }

            playBtn.addEventListener("click", play);
            loopBtn.addEventListener("click", loop);

            shuffleBtn.addEventListener("click", shuffle);
            forwardBtn.addEventListener("click", forward);
            backwardBtn.addEventListener("click", backward);

            prevBtn.addEventListener("click", e => nextMusic("prev"));
            nextBtn.addEventListener("click", e => nextMusic("next"));
            progressDiv.addEventListener("click", e => {
                progress(e);
            });

            init();
        })();

    </script>
</body>
</html>


